#!/bin/sh

options="\
display off
logout
poweroff
reboot
suspend"

choice=$(printf '%s\n' "$options" | dmenu)

case $choice in

	"display off")
		xset dpms force suspend
		;;

	logout)
		pkill dwm || notify-send "dwm was not running"
		;;

	poweroff)
		[ -d /media/sd ] && pumount /media/sd
		[ -d /media/m3 ] && pumount /media/m3
		[ -d /media/mmcblk* ] && pumount /media/mmcblk*
		[ -d /media/sd* ] && pumount /media/sd*
		doas systemctl poweroff
		;;

	reboot)
		[ -d /media/sd ] && pumount /media/sd
		[ -d /media/m3 ] && pumount /media/m3
		[ -d /media/mmcblk* ] && pumount /media/mmcblk*
		[ -d /media/sd* ] && pumount /media/sd*
		doas systemctl reboot
		;;

	suspend)
		doas systemctl suspend
		;;

esac
