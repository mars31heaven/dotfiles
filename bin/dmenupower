#!/bin/sh

options="\
display off
logout
poweroff
reboot
suspend"

choice=$(printf '%s\n' "$options" | dmenu)

case $choice in

	"display off")
		xset dpms force off
		;;

	logout)
		pkill dwm || notify-send "dwm was not running"
		;;

	poweroff)
	lsblk | grep -qo media
	if [ -d /media ]; then
		pumount /media/* >/dev/null 2>&1
		doas poweroff
	fi
		;;

	reboot)
	lsblk | grep -qo media
	if [ -d /media ]; then
		pumount /media/* >/dev/null 2>&1
		doas reboot
	fi
		;;

	suspend)
		doas zzz
		;;

esac
